---
title: "Domáca úloha 1"
output: html_document
---

```{r setup, include=FALSE} 
knitr::opts_knit$set(root.dir = "C:/Users/Public")
```

- Platia [všeobecné pokyny](https://anna-hlubinova.github.io/mEMM_DU/)
- **Deadline: 13.10.2024, 23:59:59**
- Rezervácia dát pre oba príklady prebieha v tabuľke [https://bit.ly/3zcqIAf](https://bit.ly/3zcqIAf) v hárku DÚ 1.

## Príklad 1: Výnosy akcií (5 bodov)

Tak ako na cvičení, pomocou knižnice `quantmod` načítajte priamo do R-ka ceny akcií a zistite, či sa ich výnosy dajú modelovať ako biely šum.

Zvoľte si firmu (každý, resp. každá skupina inú) a stiahnite si ceny akcií tejto firmy za zvolené obdobie, minimálne za jeden rok. Pracujte s posledným stĺpcom `Adjusted`. Funkciou `to.weekly` najprv transformujte dáta na týždenné a následne vypočítajte logaritmické výnosy. Testujte pomocou ACF a Ljung-Boxovho testu, že tieto výnosy sa dajú modelovať ako konštanta (stredná hodnota výnosov) plus biely šum. 


V texte domácej úlohy uveďte (_za každú časť 1 bod_):

- Názov zvolenej firmy a krátku informáciu o tejto firme (stručne - stačí jedna veta, prípadne niekoľko viet).
- Graf priebehu cien akcie a výnosov.
- Výberovú autokorelačnú funkciu výnosov a jej interpretáciu (Sú všetky autokorelácie nesignifikantné? Ktoré sú signifikantné?).
- Výsledky Ljung-Boxovho testu pre hodnoty lagu od 1 až po zvolenú hornú hranicu. P-hodnoty znázornite graficky ako na cvičení, spolu s porovnaním s hodnotou 0.05. Interpretujte výsledky.
- Zhodnotenie modelu: Považujete model "výnosy sú konštanta (t. j. priemerný výnos) plus biely šum" za dobrý model pre vaše dáta? Prečo?

## Príklad 2: Malé ostrovné ekonomiky (5 bodov)

V tomto príklade budete pracovať s dátami zo stránky [https://entrepot.recherche.data.gouv.fr/dataset.xhtml?persistentId=doi:10.57745/UA2LRO](https://entrepot.recherche.data.gouv.fr/dataset.xhtml?persistentId=doi:10.57745/UA2LRO).

Článok s podrobnejšími informáciami o dátach: [https://www.sciencedirect.com/science/article/pii/S2352340924006413](https://www.sciencedirect.com/science/article/pii/S2352340924006413)

Na uvedenej stránke s dátami si stiahnite prvý dataset s názvom "NLucic_SIHTD_Continuous_Foreign_Trade_series_1900-2021-14032024.tab" (odporúčam stiahnuť vo formáte RData). Dáta načítajte do R-ka

```{r}
load("NLucic_SIHTD_Continuous_Foreign_Trade_series_1900-2021-14032024.Rdata")
```

Vytvorí sa objekt `x`
```{r}
class(x)
```

**Každý (resp. každá dvojica) bude pracovať s dátami pre iný ostrov** (rezervácia v tabuľke [https://bit.ly/3zcqIAf](https://bit.ly/3zcqIAf)). Aké ostrovy sú k dispozícii na modelovanie nájdete príkazom
```{r}
colnames(x)
```

K dátam pre vybraný ostrov môžete potom pristupovať jedným z nasledujúcich spôsobov
```{r}
data1 <- x[, 10]
data2 <- x[, "Bermuda"]
data3 <- x$BritishVirginIslands
```

V texte domácej úlohy uveďte (_za každú časť 1 bod_):

- Stručne popíšte, čo vyjadrujú dáta, ktoré modelujete a ostrov, ktorý ste si vybrali (stručne = pár viet)
- Skontrolujte, či sú v dátach nejaké `NA` hodnoty na konci - ak áno, treba ich vynechať. Z vektora hodnôt spravte časový rad pomocou funkcie `ts`. Vykreslite ich priebeh, priebeh ich logaritmov a diferencií logaritmov. 
- Zistite, či môžeme **diferencie logaritmov** považovať za biely šum. Zobrazte autokorelačnú funkciu a p-hodnoty Ljung Boxovho testu a okomentujte výsledky.
- **Pre diferencie logaritmov** odhadnite AR(1) model. Môžeme považovať daný model za dostatočný? Zdôvodnite.
- Napíšte predpis odhadnutého AR(1) modelu a dopočítajte strednú hodnotu.

_Poznámka:_
Na príklade štátu Bermuda ukážeme, prečo je úlohou pracovať s diferenciami logaritmov. Zobrazme si dáta

```{r echo=FALSE}
data <- x[, "Bermuda"]
data <- as.ts(data)
```
```{r}
plot(data)
```

S rastúcimi hodnotami rastie disperzia dát, preto dáta zlogaritmujeme:
```{r}
plot(log(data))
```

V týchto dátach je rastúci trend, preto nie sú stacionárne a kvôli tomu ich zdiferencujeme:
```{r}
plot(diff(log(data)))
```

Pre tieto dáta budeme testovať AR model, bude však formulovaný ako AR model pre logaritmy. Hľadáme teda model v tvare
```{r, eval=FALSE}
sarima(log(data), p, 1, q)
```